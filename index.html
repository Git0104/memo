<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>便利メモ</title>
<style>
  body { font-family: sans-serif; margin: 20px; }
  #memoList { margin-top: 20px; }
  .memo { border: 1px solid #ccc; padding: 10px; margin-bottom: 10px; }
  textarea { width: 100%; height: 100px; }
</style>
</head>
<body>

<h1>便利メモ</h1>

<input type="text" id="memoTitle" placeholder="タイトル">
<textarea id="memoContent" placeholder="ここにメモ"></textarea><br>
<button id="saveBtn">保存</button>
<input type="text" id="searchInput" placeholder="検索">

<div id="memoList"></div>

<script>
const memoList = document.getElementById('memoList');
const saveBtn = document.getElementById('saveBtn');
const memoTitle = document.getElementById('memoTitle');
const memoContent = document.getElementById('memoContent');
const searchInput = document.getElementById('searchInput');

let memos = JSON.parse(localStorage.getItem('memos') || '[]');

function renderMemos() {
  const query = searchInput.value.toLowerCase();
  memoList.innerHTML = '';
  memos.filter(m => m.title.toLowerCase().includes(query) || m.content.toLowerCase().includes(query))
       .forEach((memo, index) => {
    const div = document.createElement('div');
    div.className = 'memo';
    div.innerHTML = `<strong>${memo.title}</strong>
                     <p>${memo.content.replace(/\n/g,'<br>')}</p>
                     <button onclick="editMemo(${index})">編集</button>
                     <button onclick="deleteMemo(${index})">削除</button>`;
    memoList.appendChild(div);
  });
}

function saveMemo() {
  const title = memoTitle.value.trim();
  const content = memoContent.value.trim();
  if(!title) return alert('タイトルを入力してください');
  memos.push({title, content});
  localStorage.setItem('memos', JSON.stringify(memos));
  memoTitle.value = '';
  memoContent.value = '';
  renderMemos();
}

function editMemo(index) {
  const memo = memos[index];
  memoTitle.value = memo.title;
  memoContent.value = memo.content;
  memos.splice(index,1);
  localStorage.setItem('memos', JSON.stringify(memos));
  renderMemos();
}

function deleteMemo(index) {
  if(!confirm('削除しますか？')) return;
  memos.splice(index,1);
  localStorage.setItem('memos', JSON.stringify(memos));
  renderMemos();
}

saveBtn.addEventListener('click', saveMemo);
searchInput.addEventListener('input', renderMemos);

renderMemos();
</script>

</body>
</html>
